# Wave Packet Optimization: Baseline vs Algorithms 1–3

This compares the 128^3, 300-step wave packet scenario across the baseline and three optimization algorithms (3 trials each, GPU backend).

## Summary

- Energy conservation: all algorithms meet Gate 0 target (< 5e-4) with ~1.94e-04 drift.
- Speed: none of the selective-update algorithms outperform the baseline in this configuration.
- Active fraction: the packet occupies most of the grid (~91%–98%), leaving little room for masking gains.

## Metrics (means over 3 trials)

- Baseline
  - Time: 2.193 s ± 0.089 s
  - Energy drift: 1.94e-04
  - Active fraction: 91.4%
  - Speedup vs baseline: 1.00x (reference)

- Algorithm 1 — Active Field Mask (amp threshold + halo)
  - Time: 3.152 s ± 0.052 s
  - Energy drift: 1.94e-04 (PASS)
  - Active fraction: 94.9%
  - Speedup vs baseline: 0.76x (slower)

- Algorithm 2 — Gradient-Adaptive Culling (|∇E| + |E| + halo)
  - Time: 4.016 s ± 0.073 s
  - Energy drift: 1.94e-04 (PASS)
  - Active fraction: 98.3%
  - Speedup vs baseline: 0.55x (slower)

- Algorithm 3 — Wavefront Prediction (|E| or |∂E/∂t|, expand by ~c·dt, persistent)
  - Time: 3.249 s ± 0.217 s
  - Energy drift: 1.94e-04 (PASS)
  - Active fraction: 92.3%
  - Speedup vs baseline: 0.68x (slower)

## Interpretation

- With the chosen Gaussian (σ=20, λ≈32, A=0.01), the field is dense across the volume (>90% active). Selective-update overhead dominates, so masking loses to uniform updates.
- Algorithm 2 inflates activity via gradient threshold + halo, hitting ~98% active, which explains the largest slowdown.
- Algorithm 3 is safest physically and tracks the wavefront, but the small c·dt relative to cell spacing and persistence still keeps active coverage high.

## Next steps (low-risk tweaks)

- Reduce problem density to create sparsity:
  - Narrower packet (e.g., σ=8–12) and/or smaller amplitude.
  - Larger grid (e.g., 256^3) with same packet size to lower active fraction.
- Parameter sweeps (record energy + time):
  - Algorithm 1: threshold ∈ {2e-6, 5e-6}, halo ∈ {1,2}.
  - Algorithm 2: grad_thresh × {2,5}, halo ∈ {1,2}.
  - Algorithm 3: safety ∈ {1.0, 1.5}, persistence ∈ {False, True}.
- Consider block-wise masks (tile the grid 8^3 or 16^3) to reduce mask bookkeeping and kernel launch overheads.

Generated by experiments/lattice_optimization_suite on this run.